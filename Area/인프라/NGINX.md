NGINX는 트래픽이 많은 웹사이트의 서버(WAS)를 도와주는 비동기 이벤트 기반 구조의 웹 구조 서버 프로그램

웹 서버, 리버스 프록시, 메일 프록시, 그리고 HTTP 캐시와 같은 다양한 기능을 제공하는 소프트웨어입니다. 

처음에는 웹 서버로 개발되었지만, 현재는 로드 밸런싱, HTTP 캐싱, 리버스 프록시 기능을 포함하여 고성능 및 고가용성을 요구하는 웹 애플리케이션을 위한 중요한 도구로 널리 사용됩니다.

### NGINX의 주요 기능

- **웹 서버**: 정적 콘텐츠(HTML, CSS, JavaScript 파일 등)를 제공하는 데 사용됩니다. NGINX는 비동기 이벤트 기반의 아키텍처를 사용하여 높은 동시성을 처리할 수 있습니다.
- **리버스 프록시**: 클라이언트의 요청을 받아 하나 이상의 백엔드 서버로 전달하고, 백엔드 서버의 응답을 클라이언트에게 다시 전송합니다. 이를 통해 부하 분산, SSL 종료, 정적 콘텐츠 캐싱 등을 수행할 수 있습니다.
- **로드 밸런서**: 여러 서버에 걸쳐 클라이언트의 요청을 분산시킵니다. 이는 웹 애플리케이션의 확장성과 가용성을 향상시킵니다.
- **HTTP 캐시**: 자주 요청되는 웹 페이지나 파일을 메모리 또는 디스크에 저장하여, 동일한 요청에 대해 더 빠르게 응답할 수 있게 합니다.
- **메일 프록시**: IMAP, POP3, SMTP 프로토콜을 지원하여 메일 서비스의 리버스 프록시 기능을 제공합니다.

### NGINX의 장점

- **성능**: NGINX는 비동기 이벤트 기반 모델을 사용하여 매우 높은 동시 연결을 처리할 수 있습니다. 이는 특히 정적 콘텐츠를 제공하거나 리버스 프록시로 사용될 때 큰 장점입니다.
- **유연성**: 다양한 프로토콜을 지원하고, URL 기반 라우팅, SSL/TLS 종료, 웹소켓, HTTP/2 지원 등 다양한 기능을 제공합니다.
- **확장성**: 로드 밸런싱 기능을 통해 애플리케이션을 수평적으로 확장할 수 있으며, 동적으로 서버를 추가하거나 제거할 수 있습니다.
- **보안**: 요청 필터링, IP 주소 기반의 액세스 제어, SSL/TLS 프로토콜을 통한 데이터 암호화 등 다양한 보안 기능을 제공합니다.
- **효율성**: 리소스 사용이 경제적이며, 적은 메모리와 CPU 사용으로 많은 수의 동시 연결을 처리할 수 있습니다.

NGINX는 다양한 운영 체제에서 사용할 수 있으며, 웹 사이트의 성능 향상, 보안 강화, 그리고 고가용성 구축을 위한 솔루션을 제공합니다. 이러한 이유로, 많은 인기 있는 웹 사이트와 서비스에서 NGINX를 선택하여 사용하고 있습니다.

### 코치세션
- APACHE (서버)
	- NCSA ( UNIX 기반 )
	- Linux 에 사용하기 위해 개발됨
	- 동작 방식
		- request → process ( 1 connection )
		- prefork : 미리 프로세스를 만들어두고 connection을 연결함
	- 동적 컨텐츠 핸들링 가능
	- 아파치 서버 하나로 클라이언트의 요청을 처리 가능
	- 1999년 인터넷 사용자 급증으로 connection을 매우 많이 생성해야함
	  → 더 이상 커넥션을 만들 수 없는 상황이 생김
	  → 컨텍스트 스위칭 문제로 cpu 과부하
		→ 문제 해결을 위해 NGINX 등장
- NGINX
	- 동작 방식
		- master process ↔ worker process
		- master process : 
		- worker process : 자신에게 아무런 요청이 없더라도 기다렸다가 새로운 커넥션을 형성하거나 이미 만들어진 커넥션에서 요청을 받아 효율적으로 프로세스 처리
		- 이벤트가 큐에 담긴 상태로 비동기로 처리
	- 시간이 오래 걸리는 요청은?
		- Thread Pool 에 이벤트를 넘기고 다음 이벤트 수행
		- CPU 의 코어 수 만큼 만듦
		- 컨텍스트 스위칭으로 인한 오버헤드를 줄읾
		- 동일한 커넥션 수일 경우 속도 2배 가량 향상
	- 특징
		- 비동기 이벤트 기반 구조
		- 높은 성능과 낮은 메모리 사용
		- 리버스 프록시와 로드 밸런싱
			- 리버스 프록시 : 웹 서버를 직접 노출하지 않음
				- 이점 : 보안 강화, 부하 분산, 캐싱, SSL/TLS 처리, 확장성
			- 로드 밸런싱
				- 어떤 방식으로 부하 분산할 것인가 정할 수 있음
				- upstream 등록
				- location 에 해당 upstream으로 proxy_pass 연결
				- ![[Pasted image 20240424141345.png]]
		- 정적 파일 처리 최적화
		- 다양한 프로토콜 지원
	- 구조
		- 기본 디렉토리
		- 주요 파일 : nginx.conf, conf.d 
		- sites-available, sites-enabled
		- 가상 호스트를 설정해 유연성 증가
		- 관리 용이, 백업 및 복구 가능

- caddy
	- NGINX 와 경쟁할 정도로 빠름
	- 아직 출시된 지 얼마 안됨
	- 다양한 플러그인과 안정성을 가진 NGINX 에 비해 아직 부족하긴 함